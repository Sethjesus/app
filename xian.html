<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä»™æ´åœ‹å°ç’°ä¿å°è¡›å£« - æœ€çµ‚å„ªåŒ–ç‰ˆ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial Rounded MT Bold', 'Arial', sans-serif;
        }
        
        body {
            background-color: #e9f7ef;
            color: #333;
            line-height: 1.6;
            padding: 10px;
            background-image: linear-gradient(to bottom, #e9f7ef, #d4f1e6);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #4CAF50, #2E7D32);
            color: white;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        header h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        header p {
            font-size: 1.2rem;
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .logo {
            width: 100px;
            height: 100px;
            background-color: white;
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: #4CAF50;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .timer {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: rgba(255, 255, 255, 0.2);
            padding: 10px 15px;
            border-radius: 10px;
            font-size: 1.5rem;
            font-weight: bold;
            backdrop-filter: blur(5px);
        }
        
        .tabs {
            display: flex;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .tab-button {
            padding: 12px 25px;
            background-color: #f1f8e9;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            color: #2E7D32;
        }
        
        .tab-button.active {
            background-color: #4CAF50;
            color: white;
        }
        
        .tab-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .teaching-section, .game-section {
            flex: 1;
            min-width: 300px;
            background-color: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }
        
        .section-title {
            color: #2E7D32;
            border-bottom: 3px solid #FFEB3B;
            padding-bottom: 10px;
            margin-bottom: 20px;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-title i {
            font-size: 1.8rem;
        }
        
        .knowledge-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .knowledge-card {
            background: linear-gradient(135deg, #f9f9f9, #ffffff);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s, box-shadow 0.3s;
            border-left: 5px solid;
            cursor: pointer;
            height: 100%;
        }
        
        .knowledge-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 7px 12px rgba(0, 0, 0, 0.1);
        }
        
        .knowledge-card.energy {
            border-left-color: #FF9800;
        }
        
        .knowledge-card.ozone {
            border-left-color: #9C27B0;
        }
        
        .knowledge-card.water {
            border-left-color: #2196F3;
        }
        
        .knowledge-card.animal {
            border-left-color: #795548;
        }
        
        .knowledge-card.esg {
            border-left-color: #4CAF50;
        }
        
        .knowledge-card.carbon {
            border-left-color: #8BC34A;
        }
        
        .knowledge-card.climate {
            border-left-color: #607D8B;
        }
        
        .card-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .knowledge-card h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #333;
            text-align: center;
        }
        
        .card-content {
            font-size: 1rem;
            color: #555;
            line-height: 1.5;
        }
        
        .card-tip {
            background-color: #FFF9C4;
            padding: 10px;
            border-radius: 5px;
            margin-top: 15px;
            font-size: 0.9rem;
            border-left: 3px solid #FFC107;
        }
        
        .game-area {
            background-color: #f8fdf9;
            border-radius: 10px;
            padding: 20px;
            min-height: 500px;
            border: 2px dashed #4CAF50;
        }
        
        .game-instruction {
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: #555;
            text-align: center;
        }
        
        .game-modes {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .mode-button {
            padding: 10px 20px;
            background-color: #E8F5E9;
            border: 2px solid #4CAF50;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            color: #2E7D32;
            transition: all 0.3s;
        }
        
        .mode-button.active {
            background-color: #4CAF50;
            color: white;
        }
        
        .game-container {
            min-height: 350px;
            position: relative;
        }
        
        /* é…å°éŠæˆ²æ¨£å¼ */
        .matching-game {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        
        .matching-row {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            flex-wrap: wrap;
        }
        
        .matching-item {
            width: 140px;
            height: 140px;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            text-align: center;
            padding: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        
        .matching-item.left {
            background-color: #E3F2FD;
            border: 2px solid #2196F3;
            color: #1565C0;
        }
        
        .matching-item.right {
            background-color: #F1F8E9;
            border: 2px solid #8BC34A;
            color: #33691E;
        }
        
        .matching-item.selected {
            transform: scale(1.05);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        
        .matching-item.matched {
            opacity: 0.7;
            cursor: default;
        }
        
        .matching-arrow {
            font-size: 2rem;
            color: #FF5722;
        }
        
        /* ç¯€é›»æŒ‘æˆ°éŠæˆ²æ¨£å¼ - ä¿®æ­£ç‰ˆ */
        .energy-challenge {
            text-align: center;
        }
        
        .house-container {
            width: 300px;
            height: 250px;
            margin: 20px auto;
            position: relative;
            background-color: #FFF3E0;
            border-radius: 10px;
            padding: 20px;
            border: 3px solid #FF9800;
        }
        
        .appliance {
            position: absolute;
            width: 60px;
            height: 60px;
            background-color: white;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 3px 5px rgba(0,0,0,0.2);
            font-size: 0.8rem;
            text-align: center;
        }
        
        .appliance.on {
            background-color: #FFECB3;
            border: 2px solid #FF9800;
        }
        
        .appliance.off {
            background-color: #F5F5F5;
            border: 2px solid #9E9E9E;
            color: #777;
        }
        
        .appliance-icon {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }
        
        .energy-meter {
            width: 80%;
            height: 30px;
            background-color: #E0E0E0;
            border-radius: 15px;
            margin: 20px auto;
            overflow: hidden;
            position: relative;
        }
        
        .energy-level {
            height: 100%;
            width: 50%;
            background: linear-gradient(90deg, #4CAF50, #FF9800, #F44336);
            border-radius: 15px;
            transition: width 0.5s;
        }
        
        .meter-labels {
            display: flex;
            justify-content: space-between;
            width: 80%;
            margin: 0 auto;
            font-size: 0.9rem;
            font-weight: bold;
            color: #555;
        }
        
        .energy-details {
            display: flex;
            justify-content: space-around;
            margin-top: 15px;
            font-size: 0.9rem;
        }
        
        .energy-detail {
            background-color: #F5F5F5;
            padding: 8px 12px;
            border-radius: 8px;
            min-width: 120px;
        }
        
        .energy-detail .label {
            font-weight: bold;
            color: #666;
        }
        
        .energy-detail .value {
            font-size: 1.1rem;
            font-weight: bold;
            color: #2E7D32;
        }
        
        .energy-detail .value.high {
            color: #F44336;
        }
        
        /* ç¢³åŒ¯æŒ‘æˆ°è³½æ¨£å¼ - ä¿®æ­£ç‰ˆ */
        .carbon-sink-game {
            text-align: center;
        }
        
        .carbon-meter {
            width: 80%;
            height: 30px;
            background-color: #E0E0E0;
            border-radius: 15px;
            margin: 20px auto;
            overflow: hidden;
            position: relative;
        }
        
        .carbon-level {
            height: 100%;
            width: 30%;
            background: linear-gradient(90deg, #F44336, #FF9800, #4CAF50);
            border-radius: 15px;
            transition: width 0.5s;
        }
        
        .carbon-sources, .carbon-sinks {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .carbon-source {
            padding: 10px 15px;
            background-color: #FFEBEE;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid #F44336;
            font-weight: bold;
            color: #C62828;
            min-width: 120px;
        }
        
        .carbon-sink {
            padding: 10px 15px;
            background-color: #E8F5E9;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid #4CAF50;
            font-weight: bold;
            color: #2E7D32;
            min-width: 120px;
        }
        
        .carbon-source:hover {
            background-color: #FFCDD2;
        }
        
        .carbon-sink:hover {
            background-color: #C8E6C9;
        }
        
        .earth-container {
            width: 200px;
            height: 200px;
            margin: 20px auto;
            position: relative;
            background-color: #BBDEFB;
            border-radius: 50%;
            overflow: hidden;
            border: 5px solid #64B5F6;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 5rem;
            color: #1E88E5;
        }
        
        .carbon-score {
            display: flex;
            justify-content: space-around;
            margin-top: 15px;
            font-size: 0.9rem;
        }
        
        .carbon-score-item {
            background-color: #F5F5F5;
            padding: 8px 12px;
            border-radius: 8px;
            min-width: 140px;
        }
        
        .carbon-score-item .label {
            font-weight: bold;
            color: #666;
        }
        
        .carbon-score-item .value {
            font-size: 1.1rem;
            font-weight: bold;
            color: #2E7D32;
        }
        
        .carbon-score-item .value.negative {
            color: #F44336;
        }
        
        .carbon-score-item .value.positive {
            color: #4CAF50;
        }
        
        /* æ‹¯æ•‘åŒ—æ¥µç†ŠéŠæˆ²æ¨£å¼ */
        .polar-bear-game {
            text-align: center;
        }
        
        .iceberg {
            width: 300px;
            height: 150px;
            background-color: #B3E5FC;
            margin: 20px auto;
            border-radius: 20px;
            position: relative;
            overflow: hidden;
            border: 3px solid #81D4FA;
        }
        
        .ice-level {
            height: 80%;
            width: 100%;
            background-color: #E1F5FE;
            position: absolute;
            bottom: 0;
            transition: height 2s;
        }
        
        .polar-bear {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 4rem;
            transition: bottom 2s;
            z-index: 2;
        }
        
        .threats {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .threat {
            padding: 10px 15px;
            background-color: #FFEBEE;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid #F44336;
            font-weight: bold;
            color: #C62828;
        }
        
        .threat:hover {
            background-color: #FFCDD2;
        }
        
        .solutions {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .solution {
            padding: 10px 15px;
            background-color: #E8F5E9;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid #4CAF50;
            font-weight: bold;
            color: #2E7D32;
        }
        
        .solution:hover {
            background-color: #C8E6C9;
        }
        
        .solution.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .game-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #ddd;
        }
        
        .score, .level {
            font-size: 1.3rem;
            font-weight: bold;
            color: #2E7D32;
        }
        
        .game-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        button {
            padding: 12px 25px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
        }
        
        .btn-start {
            background-color: #4CAF50;
            color: white;
        }
        
        .btn-reset {
            background-color: #FF9800;
            color: white;
        }
        
        .btn-next {
            background-color: #2196F3;
            color: white;
        }
        
        .feedback {
            text-align: center;
            font-size: 1.4rem;
            font-weight: bold;
            margin-top: 20px;
            min-height: 40px;
            padding: 10px;
            border-radius: 10px;
            transition: all 0.3s;
        }
        
        .feedback.correct {
            color: #2E7D32;
            background-color: rgba(76, 175, 80, 0.1);
        }
        
        .feedback.incorrect {
            color: #F44336;
            background-color: rgba(244, 67, 54, 0.1);
        }
        
        .progress-container {
            margin-top: 20px;
            background-color: #eee;
            border-radius: 10px;
            overflow: hidden;
            height: 20px;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
            width: 0%;
            transition: width 0.5s;
        }
        
        .footer {
            text-align: center;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
            border-top: 1px solid #ddd;
            margin-top: 20px;
        }
        
        .fact-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            display: none;
        }
        
        .fact-content {
            background-color: white;
            width: 90%;
            max-width: 600px;
            border-radius: 15px;
            padding: 30px;
            position: relative;
            animation: popup 0.5s;
        }
        
        @keyframes popup {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .close-popup {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: #777;
        }
        
        .fact-content h3 {
            color: #2E7D32;
            margin-bottom: 15px;
            font-size: 1.8rem;
        }
        
        .fact-icon {
            font-size: 3rem;
            text-align: center;
            margin: 15px 0;
            color: #4CAF50;
        }
        
        .badge {
            display: inline-block;
            padding: 5px 10px;
            background-color: #FFEB3B;
            border-radius: 5px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-left: 10px;
            color: #333;
        }
        
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            header h1 {
                font-size: 2rem;
            }
            
            .timer {
                position: static;
                margin-top: 15px;
                display: inline-block;
            }
            
            .tabs {
                flex-direction: column;
                align-items: center;
            }
            
            .knowledge-cards {
                grid-template-columns: 1fr;
            }
            
            .house-container {
                width: 250px;
                height: 220px;
            }
            
            .appliance {
                width: 50px;
                height: 50px;
                font-size: 0.7rem;
            }
            
            .energy-details, .carbon-score {
                flex-direction: column;
                align-items: center;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-earth-asia"></i>
            </div>
            <h1>ä»™æ´åœ‹å°ç’°ä¿å°è¡›å£« - æœ€çµ‚å„ªåŒ–ç‰ˆ</h1>
            <p>å­¸ç¿’ç’°å¢ƒä¿è­·çŸ¥è­˜ï¼Œå¾ç¯€ç´„ç”¨é›»ã€ç¢³åŒ¯åˆ°èªè­˜è‡­æ°§ç ´æ´ã€ESGã€æ‹¯æ•‘åŒ—æ¥µç†Šï¼Œä¸€èµ·å®ˆè­·åœ°çƒï¼</p>
            <div class="timer">
                <i class="fas fa-clock"></i> <span id="time">30:00</span>
            </div>
        </header>
        
        <div class="tabs">
            <button class="tab-button active" data-tab="knowledge">
                <i class="fas fa-graduation-cap"></i> ç’°ä¿çŸ¥è­˜å­¸å ‚
            </button>
            <button class="tab-button" data-tab="matching-game">
                <i class="fas fa-puzzle-piece"></i> ç’°ä¿é…å°éŠæˆ²
            </button>
            <button class="tab-button" data-tab="energy-game">
                <i class="fas fa-bolt"></i> ç¯€é›»æŒ‘æˆ°è³½
            </button>
            <button class="tab-button" data-tab="carbon-game">
                <i class="fas fa-tree"></i> ç¢³åŒ¯æŒ‘æˆ°è³½
            </button>
            <button class="tab-button" data-tab="polar-bear-game">
                <i class="fas fa-paw"></i> æ‹¯æ•‘åŒ—æ¥µç†Š
            </button>
        </div>
        
        <div class="tab-content active" id="knowledge-tab">
            <div class="teaching-section">
                <h2 class="section-title"><i class="fas fa-book-open"></i> ç’°ä¿çŸ¥è­˜å¤§å…¨</h2>
                <p>å°æœ‹å‹ï¼Œè®“æˆ‘å€‘å­¸ç¿’æ›´å¤šé—œæ–¼ç’°å¢ƒä¿è­·çš„çŸ¥è­˜ï¼Œäº†è§£æˆ‘å€‘çš„åœ°çƒæ­£é¢è‡¨å“ªäº›æŒ‘æˆ°ï¼Œä»¥åŠæˆ‘å€‘å¯ä»¥æ€éº¼åšï¼</p>
                
                <div class="knowledge-cards">
                    <div class="knowledge-card energy" onclick="showFact('energy')">
                        <div class="card-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <h3>ç”¨é›»ç¯€ç´„èˆ‡èƒ½æºç›£æ§</h3>
                        <div class="card-content">
                            <p><strong>é›»è²»è¨ˆç®—å…¬å¼ï¼š</strong></p>
                            <p>é›»è²» = ç”¨é›»åº¦æ•¸ Ã— æ¯åº¦é›»åƒ¹(ç´„3å…ƒ)</p>
                            <p><strong>é›»å™¨è€—é›»è¨ˆç®—ï¼š</strong></p>
                            <p>ç”¨é›»åº¦æ•¸ = é›»å™¨åŠŸç‡(W) Ã— ä½¿ç”¨æ™‚é–“(å°æ™‚) Ã· 1000</p>
                            <p><strong>ä¾‹å¦‚ï¼š</strong></p>
                            <ul>
                                <li>100Wé›»ç‡ˆé–‹10å°æ™‚ = 1åº¦é›» = 3å…ƒ</li>
                                <li>å†·æ°£1500Wé–‹1å°æ™‚ = 1.5åº¦é›» = 4.5å…ƒ</li>
                                <li>é—œé–‰å¾…æ©Ÿé›»å™¨å¯ç¯€çœ5-10%é›»è²»</li>
                            </ul>
                        </div>
                        <div class="card-tip">
                            <strong>ç¯€é›»æŠ€å·§ï¼š</strong>é›¢é–‹æˆ¿é–“è¶…é10åˆ†é˜å°±é—œç‡ˆï¼Œå¤å­£å†·æ°£è¨­å®š26-28Â°Cæœ€çœé›»ï¼
                        </div>
                    </div>
                    
                    <div class="knowledge-card carbon" onclick="showFact('carbon')">
                        <div class="card-icon">
                            <i class="fas fa-tree"></i>
                        </div>
                        <h3>æ¨¹æœ¨ç¢³åŒ¯èˆ‡æµ·æ´‹ç¢³åŒ¯ <span class="badge">æ–°çŸ¥è­˜</span></h3>
                        <div class="card-content">
                            <p><strong>ç¢³åŒ¯æ˜¯ä»€éº¼ï¼Ÿ</strong>èƒ½å¤ å¸æ”¶äºŒæ°§åŒ–ç¢³çš„è‡ªç„¶ç³»çµ±ã€‚</p>
                            <p><strong>æ¨¹æœ¨ç¢³åŒ¯ï¼š</strong></p>
                            <ul>
                                <li>ä¸€æ£µæ¨¹æ¯å¹´å¯å¸æ”¶12å…¬æ–¤äºŒæ°§åŒ–ç¢³</li>
                                <li>ä¸€æ£µæ¨¹ä¸€ç”Ÿå¯å¸æ”¶ç´„1å™¸äºŒæ°§åŒ–ç¢³</li>
                                <li>1å…¬é ƒæ£®æ—æ¯å¹´å¸æ”¶22å™¸äºŒæ°§åŒ–ç¢³</li>
                            </ul>
                            <p><strong>æµ·æ´‹ç¢³åŒ¯ï¼š</strong></p>
                            <ul>
                                <li>æµ·æ´‹å¸æ”¶ç´„30%äººé¡æ’æ”¾çš„äºŒæ°§åŒ–ç¢³</li>
                                <li>æµ®æ¸¸æ¤ç‰©é€šéå…‰åˆä½œç”¨å¸æ”¶äºŒæ°§åŒ–ç¢³</li>
                                <li>1å¹³æ–¹å…¬é‡Œçš„å¥åº·æµ·æ´‹æ¯å¹´å¸æ”¶150å…¬æ–¤äºŒæ°§åŒ–ç¢³</li>
                            </ul>
                        </div>
                        <div class="card-tip">
                            <strong>è¡Œå‹•ï¼š</strong>ç¨®æ¤ä¸€æ£µæ¨¹ï¼Œå®ƒä¸€ç”Ÿå¯ä»¥å¸æ”¶1å™¸çš„äºŒæ°§åŒ–ç¢³ï¼
                        </div>
                    </div>
                    
                    <div class="knowledge-card water" onclick="showFact('water')">
                        <div class="card-icon">
                            <i class="fas fa-tint"></i>
                        </div>
                        <h3>çæƒœæ°´è³‡æº</h3>
                        <div class="card-content">
                            <p>åœ°çƒä¸Šçš„æ°´åªæœ‰2.5%æ˜¯æ·¡æ°´ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†æ˜¯å†°æ²³ã€‚æˆ‘å€‘è¦ï¼š</p>
                            <ul>
                                <li>ç¸®çŸ­æ´—æ¾¡æ™‚é–“ï¼Œä½¿ç”¨çœæ°´è“®è“¬é ­</li>
                                <li>åˆ·ç‰™æ™‚é—œæ°´é¾é ­ï¼Œå¯ç¯€çœ6å…¬å‡æ°´</li>
                                <li>æ”¶é›†é›¨æ°´æ¾†èŠ±</li>
                                <li>ä¸€æ°´å¤šç”¨ï¼šæ´—ç±³æ°´å¯ä»¥æ¾†èŠ±</li>
                            </ul>
                        </div>
                        <div class="card-tip">
                            <strong>ä½ çŸ¥é“å—ï¼š</strong>ç”Ÿç”¢1ä»¶æ£‰Tæ¤éœ€è¦2,700å…¬å‡çš„æ°´ï¼
                        </div>
                    </div>
                    
                    <div class="knowledge-card animal" onclick="showFact('animal')">
                        <div class="card-icon">
                            <i class="fas fa-paw"></i>
                        </div>
                        <h3>åŒ—æ¥µç†Šèˆ‡ç”Ÿæ…‹å±æ©Ÿ</h3>
                        <div class="card-content">
                            <p>åŒ—æ¥µç†Šä¾è³´æµ·å†°æ•é£Ÿæµ·è±¹ï¼Œä½†å…¨çƒæš–åŒ–å°è‡´ï¼š</p>
                            <ul>
                                <li>åŒ—æ¥µæµ·å†°æ¯å¹´æ¸›å°‘13%</li>
                                <li>åŒ—æ¥µç†Šè¦“é£Ÿå›°é›£ï¼Œé«”é‡ä¸‹é™</li>
                                <li>ç”Ÿå­˜å€åŸŸç¸®å°ï¼Œæ•¸é‡æ¸›å°‘</li>
                            </ul>
                            <p>ä¿è­·åŒ—æ¥µç†Šï¼Œæˆ‘å€‘éœ€è¦æ¸›å°‘ç¢³æ’æ”¾ï¼Œæ¸›ç·©å…¨çƒæš–åŒ–ã€‚</p>
                        </div>
                    </div>
                    
                    <div class="knowledge-card esg" onclick="showFact('esg')">
                        <div class="card-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <h3>ä»€éº¼æ˜¯ESGï¼Ÿ <span class="badge">æ–°çŸ¥è­˜</span></h3>
                        <div class="card-content">
                            <p>ESGæ˜¯ä¼æ¥­è©•ä¼°çš„ä¸‰å€‹é‡è¦æ¨™æº–ï¼š</p>
                            <ul>
                                <li><strong>E ç’°å¢ƒï¼š</strong>å…¬å¸å°ç’°å¢ƒçš„å½±éŸ¿ï¼Œå¦‚ç¢³æ’æ”¾ã€è³‡æºä½¿ç”¨</li>
                                <li><strong>S ç¤¾æœƒï¼š</strong>å…¬å¸å°å“¡å·¥ã€ç¤¾å€çš„è²¬ä»»</li>
                                <li><strong>G æ²»ç†ï¼š</strong>å…¬å¸çš„ç®¡ç†å’Œé€æ˜åº¦</li>
                            </ul>
                            <p>é¸æ“‡æ”¯æŒESGè¡¨ç¾å¥½çš„ä¼æ¥­ï¼Œå°±æ˜¯åœ¨æ”¯æŒç’°ä¿ï¼</p>
                        </div>
                    </div>
                    
                    <div class="knowledge-card ozone" onclick="showFact('ozone')">
                        <div class="card-icon">
                            <i class="fas fa-layer-group"></i>
                        </div>
                        <h3>è‡­æ°§å±¤ç ´æ´</h3>
                        <div class="card-content">
                            <p>è‡­æ°§å±¤ä¿è­·æˆ‘å€‘å…å—æœ‰å®³ç´«å¤–ç·šå‚·å®³ã€‚ä½†äººé¡ä½¿ç”¨çš„æ°Ÿæ°¯ç¢³åŒ–ç‰©(CFCs)æœƒç ´å£è‡­æ°§å±¤ï¼Œå°è‡´ï¼š</p>
                            <ul>
                                <li>çš®è†šç™Œé¢¨éšªå¢åŠ </li>
                                <li>è¾²ä½œç‰©æ¸›ç”¢</li>
                                <li>æµ·æ´‹ç”Ÿæ…‹å—å½±éŸ¿</li>
                            </ul>
                            <p>å¥½æ¶ˆæ¯ï¼šè‡ªå¾1987å¹´è’™ç‰¹å©å…¬ç´„å¾Œï¼Œè‡­æ°§å±¤æ­£åœ¨æ…¢æ…¢æ¢å¾©ï¼</p>
                        </div>
                    </div>
                </div>
                
                <div class="game-instruction">
                    <p><i class="fas fa-lightbulb"></i> <strong>ç’°ä¿å°å£è¨£ï¼š</strong> éš¨æ‰‹é—œç‡ˆçœèƒ½æºï¼Œå†·æ°£26å‰›å‰›å¥½ï¼Œè‡ªå‚™é¤å…·å°‘å¡‘è† ï¼Œèµ°è·¯é¨è»Šæ¸›ç¢³æ’ï¼Œçæƒœç”¨æ°´æ»´æ»´è²´ï¼Œç’°ä¿è¡Œå‹•æˆ‘æœ€è¡Œï¼</p>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="matching-game-tab">
            <div class="game-section">
                <h2 class="section-title"><i class="fas fa-puzzle-piece"></i> ç’°ä¿é…å°éŠæˆ²</h2>
                
                <div class="game-area">
                    <div class="game-stats">
                        <div class="score">å¾—åˆ†: <span id="matching-score">0</span>/300</div>
                        <div class="level">é—œå¡: <span id="matching-level">1</span>/3</div>
                    </div>
                    
                    <div class="game-instruction">
                        <p>å°‡ç’°å¢ƒå•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆé…å°èµ·ä¾†ï¼é»æ“Šå·¦é‚Šçš„å•é¡Œï¼Œå†é»æ“Šå³é‚Šçš„è§£æ±ºæ–¹æ¡ˆã€‚</p>
                        <p><strong>è¨ˆåˆ†è¦å‰‡ï¼š</strong>æ¯é—œé…å°æ­£ç¢ºå¾—100åˆ†ï¼Œä¸‰é—œå…¨å°å¯å¾—300åˆ†æ»¿åˆ†ï¼</p>
                    </div>
                    
                    <div class="game-container">
                        <div class="matching-game" id="matching-game-container">
                            <!-- éŠæˆ²å…§å®¹ç”±JavaScriptå‹•æ…‹ç”Ÿæˆ -->
                        </div>
                    </div>
                    
                    <div class="feedback" id="matching-feedback"></div>
                    
                    <div class="game-controls">
                        <button class="btn-start" onclick="startMatchingGame()">
                            <i class="fas fa-play"></i> é–‹å§‹éŠæˆ²
                        </button>
                        <button class="btn-reset" onclick="resetMatchingGame()">
                            <i class="fas fa-redo"></i> é‡æ–°é–‹å§‹
                        </button>
                        <button class="btn-next" onclick="nextMatchingLevel()" disabled id="matching-next-btn">
                            <i class="fas fa-arrow-right"></i> ä¸‹ä¸€é—œ
                        </button>
                    </div>
                    
                    <div class="progress-container">
                        <div class="progress-bar" id="matching-progress-bar"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="energy-game-tab">
            <div class="game-section">
                <h2 class="section-title"><i class="fas fa-bolt"></i> ç¯€é›»æŒ‘æˆ°è³½</h2>
                
                <div class="game-area">
                    <div class="game-stats">
                        <div class="score">éŠæˆ²å¾—åˆ†: <span id="energy-score">0</span>/100</div>
                        <div class="level">æ™‚é–“: <span id="energy-time">60</span>ç§’</div>
                    </div>
                    
                    <div class="game-instruction">
                        <p>é—œé–‰ä¸å¿…è¦çš„é›»å™¨ï¼Œç¯€çœèƒ½æºï¼é»æ“Šé›»å™¨ä¾†é–‹å•Ÿæˆ–é—œé–‰å®ƒã€‚</p>
                        <p><strong>è¨ˆåˆ†è¦å‰‡ï¼š</strong></p>
                        <ul>
                            <li>é—œé–‰ä¸€å€‹é›»å™¨å¾—10åˆ†</li>
                            <li>èƒ½æºä½¿ç”¨ç‡ä½æ–¼30%å¾—30åˆ†</li>
                            <li>æ¯æœˆç¯€çœé›»è²»è¶…é$300å¾—30åˆ†</li>
                            <li>æ™‚é–“å…§å®Œæˆå¾—30åˆ†</li>
                        </ul>
                        <p>ç›®æ¨™ï¼šåœ¨60ç§’å…§é—œé–‰æ‰€æœ‰ä¸å¿…è¦é›»å™¨ï¼Œç²å¾—100åˆ†æ»¿åˆ†ï¼</p>
                    </div>
                    
                    <div class="game-container">
                        <div class="energy-challenge" id="energy-game-container">
                            <div class="energy-meter">
                                <div class="energy-level" id="energy-level"></div>
                            </div>
                            <div class="meter-labels">
                                <span>ç¯€èƒ½</span>
                                <span>æ™®é€š</span>
                                <span>è€—èƒ½</span>
                            </div>
                            
                            <div class="energy-details">
                                <div class="energy-detail">
                                    <div class="label">æ¯æœˆé›»è²»</div>
                                    <div class="value" id="energy-cost">$800</div>
                                </div>
                                <div class="energy-detail">
                                    <div class="label">ç¯€çœé›»è²»</div>
                                    <div class="value" id="energy-saved">$0</div>
                                </div>
                                <div class="energy-detail">
                                    <div class="label">ç”¨é›»åº¦æ•¸</div>
                                    <div class="value" id="energy-kwh">0</div>
                                </div>
                            </div>
                            
                            <div class="house-container" id="house-container">
                                <!-- é›»å™¨ç”±JavaScriptå‹•æ…‹ç”Ÿæˆ -->
                            </div>
                            
                            <div class="feedback" id="energy-feedback"></div>
                            
                            <div class="game-controls">
                                <button class="btn-start" onclick="startEnergyGame()">
                                    <i class="fas fa-play"></i> é–‹å§‹æŒ‘æˆ°
                                </button>
                                <button class="btn-reset" onclick="resetEnergyGame()">
                                    <i class="fas fa-redo"></i> é‡æ–°é–‹å§‹
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="carbon-game-tab">
            <div class="game-section">
                <h2 class="section-title"><i class="fas fa-tree"></i> ç¢³åŒ¯æŒ‘æˆ°è³½</h2>
                
                <div class="game-area">
                    <div class="game-stats">
                        <div class="score">éŠæˆ²å¾—åˆ†: <span id="carbon-score">0</span>/100</div>
                        <div class="level">ç¢³å¹³è¡¡: <span id="carbon-balance">-100</span> å…¬æ–¤</div>
                    </div>
                    
                    <div class="game-instruction">
                        <p>å¢åŠ ç¢³åŒ¯å¸æ”¶ï¼Œæ¸›å°‘ç¢³æ’æ”¾ï¼é»æ“Šç¢³æºå¢åŠ æ’æ”¾ï¼Œé»æ“Šç¢³åŒ¯å¢åŠ å¸æ”¶ã€‚</p>
                        <p><strong>è¨ˆåˆ†è¦å‰‡ï¼š</strong></p>
                        <ul>
                            <li>æ¯å¢åŠ 10å…¬æ–¤ç¢³åŒ¯å¾—5åˆ†</li>
                            <li>æ¯æ¸›å°‘10å…¬æ–¤ç¢³æ’æ”¾å¾—5åˆ†</li>
                            <li>ç¢³å¹³è¡¡é”åˆ°æ­£å€¼å¾—30åˆ†</li>
                            <li>ç¢³å¹³è¡¡é”åˆ°+50å¾—20åˆ†</li>
                        </ul>
                        <p>ç›®æ¨™ï¼šè®“ç¢³åŒ¯å¸æ”¶é‡è¶…éç¢³æ’æ”¾é‡ï¼Œé”åˆ°ç¢³å¹³è¡¡æ­£å€¼ï¼Œç²å¾—100åˆ†æ»¿åˆ†ï¼</p>
                    </div>
                    
                    <div class="game-container">
                        <div class="carbon-sink-game" id="carbon-game-container">
                            <div class="earth-container">
                                <i class="fas fa-globe-americas" id="earth-icon"></i>
                            </div>
                            
                            <div class="carbon-meter">
                                <div class="carbon-level" id="carbon-level"></div>
                            </div>
                            <div class="meter-labels">
                                <span>ç¢³åŒ¯ä¸è¶³</span>
                                <span>å¹³è¡¡</span>
                                <span>ç¢³åŒ¯å……è¶³</span>
                            </div>
                            
                            <div class="carbon-score">
                                <div class="carbon-score-item">
                                    <div class="label">ç¢³æ’æ”¾é‡</div>
                                    <div class="value negative" id="carbon-emission">100 å…¬æ–¤</div>
                                </div>
                                <div class="carbon-score-item">
                                    <div class="label">ç¢³åŒ¯å¸æ”¶é‡</div>
                                    <div class="value positive" id="carbon-sink-amount">0 å…¬æ–¤</div>
                                </div>
                            </div>
                            
                            <h3>ç¢³æ’æ”¾æºï¼š</h3>
                            <div class="carbon-sources" id="carbon-sources-container">
                                <!-- ç¢³æºç”±JavaScriptå‹•æ…‹ç”Ÿæˆ -->
                            </div>
                            
                            <h3>ç¢³åŒ¯å¸æ”¶ï¼š</h3>
                            <div class="carbon-sinks" id="carbon-sinks-container">
                                <!-- ç¢³åŒ¯ç”±JavaScriptå‹•æ…‹ç”Ÿæˆ -->
                            </div>
                            
                            <div class="feedback" id="carbon-feedback"></div>
                            
                            <div class="game-controls">
                                <button class="btn-start" onclick="startCarbonGame()">
                                    <i class="fas fa-play"></i> é–‹å§‹éŠæˆ²
                                </button>
                                <button class="btn-reset" onclick="resetCarbonGame()">
                                    <i class="fas fa-redo"></i> é‡æ–°é–‹å§‹
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="polar-bear-game-tab">
            <div class="game-section">
                <h2 class="section-title"><i class="fas fa-paw"></i> æ‹¯æ•‘åŒ—æ¥µç†Š</h2>
                
                <div class="game-area">
                    <div class="game-stats">
                        <div class="score">åŒ—æ¥µç†Šå¥åº·åº¦: <span id="polar-bear-health">100</span>%</div>
                        <div class="level">å†°å±¤åšåº¦: <span id="ice-thickness">100</span>%</div>
                    </div>
                    
                    <div class="game-instruction">
                        <p>å¹«åŠ©åŒ—æ¥µç†Šå°æŠ—å…¨çƒæš–åŒ–ï¼é»æ“Šå¨è„…ä¾†äº†è§£å•é¡Œï¼Œé»æ“Šè§£æ±ºæ–¹æ¡ˆä¾†å¹«åŠ©åŒ—æ¥µç†Šã€‚</p>
                        <p>æ³¨æ„ï¼šå†°å±¤èåŒ–æœƒè®“åŒ—æ¥µç†Šè½æ°´ï¼</p>
                    </div>
                    
                    <div class="game-container">
                        <div class="polar-bear-game" id="polar-bear-game-container">
                            <div class="iceberg">
                                <div class="ice-level" id="ice-level"></div>
                                <div class="polar-bear" id="polar-bear">ğŸ»â€â„ï¸</div>
                            </div>
                            
                            <h3>ç’°å¢ƒå¨è„…ï¼š</h3>
                            <div class="threats" id="threats-container">
                                <!-- å¨è„…ç”±JavaScriptå‹•æ…‹ç”Ÿæˆ -->
                            </div>
                            
                            <h3>è§£æ±ºæ–¹æ¡ˆï¼š</h3>
                            <div class="solutions" id="solutions-container">
                                <!-- è§£æ±ºæ–¹æ¡ˆç”±JavaScriptå‹•æ…‹ç”Ÿæˆ -->
                            </div>
                            
                            <div class="feedback" id="polar-bear-feedback"></div>
                            
                            <div class="game-controls">
                                <button class="btn-start" onclick="startPolarBearGame()">
                                    <i class="fas fa-play"></i> é–‹å§‹æ•‘æ´
                                </button>
                                <button class="btn-reset" onclick="resetPolarBearGame()">
                                    <i class="fas fa-redo"></i> é‡æ–°é–‹å§‹
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>ä»™æ´åœ‹å°ç’°ä¿æ•™è‚²æ´»å‹• | æ´»å‹•æ™‚é–“ï¼š30åˆ†é˜ | è¨­è¨ˆç†å¿µï¼šåŸ¹é¤Šå°æœ‹å‹ç’°ä¿æ„è­˜ï¼Œçæƒœåœ°çƒè³‡æº</p>
            <p>è¨˜ä½ï¼šæ¯å€‹å°å°çš„ç’°ä¿è¡Œå‹•ï¼Œéƒ½èƒ½ç‚ºåœ°çƒå¸¶ä¾†å¤§å¤§çš„æ”¹è®Šï¼</p>
        </div>
    </div>
    
    <!-- çŸ¥è­˜å½ˆå‡ºè¦–çª— -->
    <div class="fact-popup" id="fact-popup">
        <div class="fact-content">
            <div class="close-popup" onclick="closeFactPopup()">&times;</div>
            <h3 id="fact-title"></h3>
            <div class="fact-icon" id="fact-icon"></div>
            <div id="fact-content"></div>
            <div class="card-tip" id="fact-tip"></div>
        </div>
    </div>

    <script>
        // å…¨å±€è®Šæ•¸
        let timeLeft = 30 * 60; // 30åˆ†é˜è½‰æ›ç‚ºç§’
        let timerInterval;
        let currentTab = 'knowledge';
        
        // åˆå§‹åŒ–
        function init() {
            updateTimerDisplay();
            setupTabs();
            initMatchingGame();
            initEnergyGame();
            initCarbonGame();
            initPolarBearGame();
            startTimer();
            
            // é¡¯ç¤ºæ­¡è¿è¨Šæ¯
            setTimeout(() => {
                showFact('welcome');
            }, 1000);
        }
        
        // é–‹å§‹è¨ˆæ™‚å™¨
        function startTimer() {
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    alert('æ™‚é–“åˆ°ï¼ä»Šå¤©çš„ç’°ä¿å­¸ç¿’å®Œæˆå•¦ï¼ä½ å­¸åˆ°äº†å¥½å¤šç’°ä¿çŸ¥è­˜ï¼ŒçœŸæ£’ï¼');
                }
            }, 1000);
        }
        
        // æ›´æ–°è¨ˆæ™‚å™¨é¡¯ç¤º
        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('time').textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        // è¨­ç½®æ¨™ç±¤é åˆ‡æ›
        function setupTabs() {
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tabId = button.getAttribute('data-tab');
                    
                    // æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    
                    // æ›´æ–°å…§å®¹é¡¯ç¤º
                    tabContents.forEach(content => content.classList.remove('active'));
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                    
                    currentTab = tabId;
                });
            });
        }
        
        // é¡¯ç¤ºçŸ¥è­˜å½ˆå‡ºè¦–çª—
        function showFact(factType) {
            const popup = document.getElementById('fact-popup');
            const title = document.getElementById('fact-title');
            const icon = document.getElementById('fact-icon');
            const content = document.getElementById('fact-content');
            const tip = document.getElementById('fact-tip');
            
            const facts = {
                'welcome': {
                    title: 'æ­¡è¿ä¾†åˆ°ç’°ä¿å°è¡›å£«ï¼',
                    icon: '<i class="fas fa-earth-asia"></i>',
                    content: '<p>å°æœ‹å‹ä½ å¥½ï¼æ­¡è¿ä¾†åˆ°ä»™æ´åœ‹å°ç’°ä¿å°è¡›å£«å­¸ç¿’éŠæˆ²ï¼</p><p>åœ¨é€™è£¡ï¼Œä½ æœƒå­¸åˆ°é—œæ–¼ç¯€ç´„ç”¨é›»ã€çæƒœæ°´è³‡æºã€ä¿è­·è‡­æ°§å±¤ã€èªè­˜ESGï¼Œé‚„æœ‰ç¢³åŒ¯å’Œæ‹¯æ•‘åŒ—æ¥µç†Šçš„çŸ¥è­˜ï¼</p><p>é»æ“Šä¸åŒçš„æ¨™ç±¤é å¯ä»¥å­¸ç¿’å’Œç©éŠæˆ²ï¼Œè®“æˆ‘å€‘ä¸€èµ·æˆç‚ºç’°ä¿å°é”äººå§ï¼</p>',
                    tip: 'è¨˜å¾—åœ¨30åˆ†é˜å…§å®Œæˆæ‰€æœ‰å­¸ç¿’å’ŒéŠæˆ²å“¦ï¼'
                },
                'energy': {
                    title: 'ç”¨é›»ç¯€ç´„èˆ‡é›»è²»è¨ˆç®—',
                    icon: '<i class="fas fa-bolt"></i>',
                    content: '<p><strong>é›»è²»å¦‚ä½•è¨ˆç®—ï¼Ÿ</strong></p><p>é›»è²» = ç”¨é›»åº¦æ•¸ Ã— æ¯åº¦é›»åƒ¹(ç´„3å…ƒ)</p><p><strong>é›»å™¨è€—é›»è¨ˆç®—ï¼š</strong></p><p>ç”¨é›»åº¦æ•¸ = é›»å™¨åŠŸç‡(W) Ã— ä½¿ç”¨æ™‚é–“(å°æ™‚) Ã· 1000</p><p><strong>å¯¦éš›ä¾‹å­ï¼š</strong></p><ul><li>100Wé›»ç‡ˆé–‹10å°æ™‚ = 1åº¦é›» = 3å…ƒé›»è²»</li><li>å†·æ°£1500Wé–‹1å°æ™‚ = 1.5åº¦é›» = 4.5å…ƒé›»è²»</li><li>é›»è¦–200Wé–‹5å°æ™‚ = 1åº¦é›» = 3å…ƒé›»è²»</li><li>é›»è…¦300Wé–‹3å°æ™‚ = 0.9åº¦é›» = 2.7å…ƒé›»è²»</li></ul><p>é—œé–‰å¾…æ©Ÿé›»å™¨ï¼Œæ¯æœˆå¯ç¯€çœ5-10%é›»è²»ï¼</p>',
                    tip: 'æ™šä¸Šç¡è¦ºå‰ï¼Œè¨˜å¾—æª¢æŸ¥æ‰€æœ‰é›»å™¨æ˜¯å¦å·²é—œé–‰æˆ–æ‹”æ‰æ’é ­ï¼'
                },
                'carbon': {
                    title: 'æ¨¹æœ¨ç¢³åŒ¯èˆ‡æµ·æ´‹ç¢³åŒ¯',
                    icon: '<i class="fas fa-tree"></i>',
                    content: '<p><strong>ç¢³åŒ¯æ˜¯ä»€éº¼ï¼Ÿ</strong>èƒ½å¤ å¸æ”¶äºŒæ°§åŒ–ç¢³çš„è‡ªç„¶ç³»çµ±ã€‚</p><p><strong>æ¨¹æœ¨ç¢³åŒ¯ï¼š</strong></p><ul><li>ä¸€æ£µæ¨¹æ¯å¹´å¯å¸æ”¶12å…¬æ–¤äºŒæ°§åŒ–ç¢³</li><li>ä¸€æ£µæ¨¹ä¸€ç”Ÿå¯å¸æ”¶ç´„1å™¸äºŒæ°§åŒ–ç¢³</li><li>1å…¬é ƒæ£®æ—æ¯å¹´å¸æ”¶22å™¸äºŒæ°§åŒ–ç¢³</li><li>å…¨çƒæ£®æ—æ¯å¹´å¸æ”¶ç´„29å„„å™¸äºŒæ°§åŒ–ç¢³</li></ul><p><strong>æµ·æ´‹ç¢³åŒ¯ï¼š</strong></p><ul><li>æµ·æ´‹å¸æ”¶ç´„30%äººé¡æ’æ”¾çš„äºŒæ°§åŒ–ç¢³</li><li>æµ®æ¸¸æ¤ç‰©é€šéå…‰åˆä½œç”¨å¸æ”¶äºŒæ°§åŒ–ç¢³</li><li>1å¹³æ–¹å…¬é‡Œçš„å¥åº·æµ·æ´‹æ¯å¹´å¸æ”¶150å…¬æ–¤äºŒæ°§åŒ–ç¢³</li><li>å…¨çƒæµ·æ´‹æ¯å¹´å¸æ”¶ç´„25å„„å™¸äºŒæ°§åŒ–ç¢³</li></ul><p><strong>ä¿è­·ç¢³åŒ¯ï¼š</strong>æ¸›å°‘æ£®æ—ç ä¼ã€ä¿è­·æµ·æ´‹ç”Ÿæ…‹ã€æ¤æ¨¹é€ æ—ï¼</p>',
                    tip: 'ç¨®æ¤ä¸€æ£µæ¨¹ï¼Œå®ƒä¸€ç”Ÿå¯ä»¥å¸æ”¶1å™¸çš„äºŒæ°§åŒ–ç¢³ï¼'
                }
            };
            
            if (facts[factType]) {
                title.innerHTML = facts[factType].title;
                icon.innerHTML = facts[factType].icon;
                content.innerHTML = facts[factType].content;
                tip.innerHTML = facts[factType].tip;
                popup.style.display = 'flex';
            }
        }
        
        // é—œé–‰çŸ¥è­˜å½ˆå‡ºè¦–çª—
        function closeFactPopup() {
            document.getElementById('fact-popup').style.display = 'none';
        }
        
        // ========== é…å°éŠæˆ² ==========
        let matchingGameData = [];
        let matchingScore = 0;
        let matchingLevel = 1;
        let matchingGameActive = false;
        let selectedItem = null;
        let correctMatches = 0;
        let totalMatches = 3;
        
        function initMatchingGame() {
            matchingGameData = [
                {
                    problems: [
                        { id: 1, text: "å†·æ°£é–‹å¤ªå†·", icon: "fas fa-snowflake" },
                        { id: 2, text: "ä½¿ç”¨ä¸€æ¬¡æ€§å¡‘è† è¢‹", icon: "fas fa-shopping-bag" },
                        { id: 3, text: "é–‹è»Šä¸Šå­¸", icon: "fas fa-car" }
                    ],
                    solutions: [
                        { id: 1, text: "è¨­å®š26-28Â°C", match: 1, icon: "fas fa-thermometer-half" },
                        { id: 2, text: "è‡ªå‚™ç’°ä¿è¢‹", match: 2, icon: "fas fa-shopping-basket" },
                        { id: 3, text: "èµ°è·¯æˆ–é¨è…³è¸è»Š", match: 3, icon: "fas fa-bicycle" }
                    ]
                },
                {
                    problems: [
                        { id: 1, text: "è‡­æ°§å±¤ç ´æ´", icon: "fas fa-layer-group" },
                        { id: 2, text: "åŒ—æ¥µç†Šå¤±å»å®¶åœ’", icon: "fas fa-paw" },
                        { id: 3, text: "å†°æ²³èåŒ–", icon: "fas fa-mountain" }
                    ],
                    solutions: [
                        { id: 1, text: "æ¸›å°‘ä½¿ç”¨å†·åª’", match: 1, icon: "fas fa-wind" },
                        { id: 2, text: "æ¸›å°‘ç¢³æ’æ”¾", match: 2, icon: "fas fa-industry" },
                        { id: 3, text: "æ¸›ç·©å…¨çƒæš–åŒ–", match: 3, icon: "fas fa-temperature-high" }
                    ]
                },
                {
                    problems: [
                        { id: 1, text: "æµªè²»æ°´è³‡æº", icon: "fas fa-tint" },
                        { id: 2, text: "é›»åŠ›æµªè²»", icon: "fas fa-bolt" },
                        { id: 3, text: "ç©ºæ°£æ±¡æŸ“", icon: "fas fa-smog" }
                    ],
                    solutions: [
                        { id: 1, text: "ä¸€æ°´å¤šç”¨", match: 1, icon: "fas fa-recycle" },
                        { id: 2, text: "éš¨æ‰‹é—œç‡ˆ", match: 2, icon: "fas fa-lightbulb" },
                        { id: 3, text: "æ­ä¹˜å¤§çœ¾é‹è¼¸", match: 3, icon: "fas fa-bus" }
                    ]
                }
            ];
            
            renderMatchingGame();
        }
        
        function renderMatchingGame() {
            const container = document.getElementById('matching-game-container');
            const levelData = matchingGameData[matchingLevel - 1];
            
            container.innerHTML = '';
            
            // å•é¡Œåˆ—
            const problemsRow = document.createElement('div');
            problemsRow.className = 'matching-row';
            
            levelData.problems.forEach(problem => {
                const problemElement = document.createElement('div');
                problemElement.className = 'matching-item left';
                problemElement.innerHTML = `
                    <i class="${problem.icon}"></i>
                    <span>${problem.text}</span>
                `;
                problemElement.dataset.id = problem.id;
                problemElement.dataset.type = 'problem';
                problemElement.addEventListener('click', () => selectMatchingItem(problemElement));
                problemsRow.appendChild(problemElement);
            });
            
            container.appendChild(problemsRow);
            
            // ç®­é ­
            const arrowRow = document.createElement('div');
            arrowRow.className = 'matching-row';
            arrowRow.innerHTML = `
                <div class="matching-arrow"><i class="fas fa-long-arrow-alt-down"></i></div>
                <div class="matching-arrow"><i class="fas fa-long-arrow-alt-down"></i></div>
                <div class="matching-arrow"><i class="fas fa-long-arrow-alt-down"></i></div>
            `;
            container.appendChild(arrowRow);
            
            // è§£æ±ºæ–¹æ¡ˆåˆ—
            const solutionsRow = document.createElement('div');
            solutionsRow.className = 'matching-row';
            
            // éš¨æ©Ÿæ’åºè§£æ±ºæ–¹æ¡ˆ
            const shuffledSolutions = [...levelData.solutions].sort(() => Math.random() - 0.5);
            
            shuffledSolutions.forEach(solution => {
                const solutionElement = document.createElement('div');
                solutionElement.className = 'matching-item right';
                solutionElement.innerHTML = `
                    <i class="${solution.icon}"></i>
                    <span>${solution.text}</span>
                `;
                solutionElement.dataset.id = solution.id;
                solutionElement.dataset.match = solution.match;
                solutionElement.dataset.type = 'solution';
                solutionElement.addEventListener('click', () => selectMatchingItem(solutionElement));
                solutionsRow.appendChild(solutionElement);
            });
            
            container.appendChild(solutionsRow);
            
            // æ›´æ–°åˆ†æ•¸å’Œç­‰ç´šé¡¯ç¤º
            document.getElementById('matching-score').textContent = matchingScore;
            document.getElementById('matching-level').textContent = matchingLevel;
            document.getElementById('matching-progress-bar').style.width = '0%';
            
            // é‡ç½®åé¥‹
            document.getElementById('matching-feedback').textContent = 'é»æ“Šå•é¡Œï¼Œå†é»æ“Šè§£æ±ºæ–¹æ¡ˆä¾†é…å°ï¼';
            document.getElementById('matching-feedback').className = 'feedback';
            
            // ç¦ç”¨ä¸‹ä¸€é—œæŒ‰éˆ•
            document.getElementById('matching-next-btn').disabled = true;
            
            // é‡ç½®é¸æ“‡ç‹€æ…‹
            selectedItem = null;
            correctMatches = 0;
        }
        
        function selectMatchingItem(item) {
            if (!matchingGameActive) return;
            
            if (item.classList.contains('matched')) return;
            
            if (!selectedItem) {
                // é¸æ“‡ç¬¬ä¸€å€‹é …ç›®
                selectedItem = item;
                item.classList.add('selected');
            } else {
                // é¸æ“‡ç¬¬äºŒå€‹é …ç›®
                if (selectedItem.dataset.type === item.dataset.type) {
                    // ç›¸åŒé¡å‹ï¼Œæ›´æ›é¸æ“‡
                    selectedItem.classList.remove('selected');
                    selectedItem = item;
                    item.classList.add('selected');
                } else {
                    // ä¸åŒé¡å‹ï¼Œæª¢æŸ¥é…å°
                    const isProblemFirst = selectedItem.dataset.type === 'problem';
                    const problem = isProblemFirst ? selectedItem : item;
                    const solution = isProblemFirst ? item : selectedItem;
                    
                    const problemId = parseInt(problem.dataset.id);
                    const solutionMatchId = parseInt(solution.dataset.match);
                    
                    if (problemId === solutionMatchId) {
                        // é…å°æ­£ç¢º
                        problem.classList.add('matched');
                        solution.classList.add('matched');
                        problem.classList.remove('selected');
                        solution.classList.remove('selected');
                        
                        // æ¯é—œé…å°æ­£ç¢ºå¾—100åˆ†ï¼Œä¸‰é—œå…¨å°å¾—300åˆ†
                        matchingScore += 100;
                        document.getElementById('matching-score').textContent = matchingScore;
                        
                        correctMatches++;
                        const progress = (correctMatches / totalMatches) * 100;
                        document.getElementById('matching-progress-bar').style.width = `${progress}%`;
                        
                        document.getElementById('matching-feedback').textContent = 'å¤ªæ£’äº†ï¼é…å°æ­£ç¢ºï¼';
                        document.getElementById('matching-feedback').className = 'feedback correct';
                        
                        if (correctMatches >= totalMatches) {
                            matchingGameActive = false;
                            document.getElementById('matching-feedback').textContent = `æ­å–œï¼å®Œæˆç¬¬${matchingLevel}é—œï¼ç²å¾—100åˆ†ï¼`;
                            
                            if (matchingLevel < 3) {
                                document.getElementById('matching-next-btn').disabled = false;
                            } else {
                                document.getElementById('matching-feedback').textContent += ' ä½ å·²å®Œæˆæ‰€æœ‰é—œå¡ï¼ç²å¾—300åˆ†æ»¿åˆ†ï¼æˆç‚ºç’°ä¿é…å°é”äººï¼';
                            }
                        }
                    } else {
                        // é…å°éŒ¯èª¤
                        document.getElementById('matching-feedback').textContent = 'é…å°éŒ¯èª¤ï¼Œå†è©¦è©¦çœ‹ï¼';
                        document.getElementById('matching-feedback').className = 'feedback incorrect';
                        
                        // éŒ¯èª¤ä¸æ‰£åˆ†ï¼Œé¼“å‹µå˜—è©¦
                        selectedItem.classList.remove('selected');
                    }
                    
                    selectedItem = null;
                }
            }
        }
        
        function startMatchingGame() {
            matchingGameActive = true;
            correctMatches = 0;
            document.getElementById('matching-progress-bar').style.width = '0%';
            
            // é‡ç½®æ‰€æœ‰é …ç›®ç‹€æ…‹
            document.querySelectorAll('.matching-item').forEach(item => {
                item.classList.remove('matched', 'selected');
            });
            
            document.getElementById('matching-feedback').textContent = 'éŠæˆ²é–‹å§‹ï¼é»æ“Šå•é¡Œï¼Œå†é»æ“Šè§£æ±ºæ–¹æ¡ˆä¾†é…å°ï¼';
            document.getElementById('matching-feedback').className = 'feedback';
            
            document.getElementById('matching-next-btn').disabled = true;
        }
        
        function resetMatchingGame() {
            matchingGameActive = false;
            matchingScore = 0;
            matchingLevel = 1;
            correctMatches = 0;
            
            renderMatchingGame();
            
            document.getElementById('matching-feedback').textContent = 'é»æ“Šã€Œé–‹å§‹éŠæˆ²ã€æŒ‰éˆ•é–‹å§‹éŠæˆ²ï¼';
            document.getElementById('matching-feedback').className = 'feedback';
        }
        
        function nextMatchingLevel() {
            matchingLevel++;
            renderMatchingGame();
            startMatchingGame();
        }
        
        // ========== ç¯€é›»æŒ‘æˆ°éŠæˆ² - ä¿®æ­£ç‰ˆ ==========
        let energyGameActive = false;
        let energyScore = 0;
        let energyTimeLeft = 60;
        let energyGameTimer;
        
        // é›»å™¨æ•¸æ“š - ä¿®æ­£é›»è²»è¨ˆç®—
        let appliances = [
            { 
                id: 1, 
                name: "å†·æ°£", 
                power: 1500, // ç“¦ç‰¹
                x: 20, y: 30, 
                on: true, 
                icon: "fas fa-snowflake",
                hoursPerDay: 8, // æ¯å¤©ä½¿ç”¨8å°æ™‚
                description: "è€—é›»é‡å¤§ï¼Œè¨­å®š26Â°Cæœ€çœé›»"
            },
            { 
                id: 2, 
                name: "é›»è¦–", 
                power: 200, 
                x: 120, y: 40, 
                on: true, 
                icon: "fas fa-tv",
                hoursPerDay: 4,
                description: "å¾…æ©Ÿä¹Ÿæœƒè€—é›»ï¼Œçœ‹å®Œè¦é—œé–‰"
            },
            { 
                id: 3, 
                name: "é›»ç‡ˆ", 
                power: 100, 
                x: 220, y: 30, 
                on: true, 
                icon: "fas fa-lightbulb",
                hoursPerDay: 5,
                description: "é›¢é–‹æˆ¿é–“è¦éš¨æ‰‹é—œç‡ˆ"
            },
            { 
                id: 4, 
                name: "é›»è…¦", 
                power: 300, 
                x: 40, y: 120, 
                on: true, 
                icon: "fas fa-desktop",
                hoursPerDay: 6,
                description: "ä¸ç”¨æ™‚é—œæ©Ÿæˆ–ä¼‘çœ "
            },
            { 
                id: 5, 
                name: "é›»é¢¨æ‰‡", 
                power: 80, 
                x: 140, y: 130, 
                on: true, 
                icon: "fas fa-fan",
                hoursPerDay: 6,
                description: "æ¯”å†·æ°£çœé›»å¾ˆå¤š"
            },
            { 
                id: 6, 
                name: "å……é›»å™¨", 
                power: 50, 
                x: 220, y: 120, 
                on: true, 
                icon: "fas fa-charging-station",
                hoursPerDay: 3,
                description: "å……é£½é›»è¦æ‹”æ‰æ’é ­"
            }
        ];
        
        // é›»åƒ¹ï¼šæ¯åº¦é›»3å…ƒ
        const electricityPrice = 3;
        
        function initEnergyGame() {
            renderEnergyGame();
        }
        
        function renderEnergyGame() {
            const container = document.getElementById('house-container');
            container.innerHTML = '';
            
            appliances.forEach(appliance => {
                const applianceElement = document.createElement('div');
                applianceElement.className = `appliance ${appliance.on ? 'on' : 'off'}`;
                applianceElement.style.left = `${appliance.x}px`;
                applianceElement.style.top = `${appliance.y}px`;
                applianceElement.innerHTML = `
                    <div class="appliance-icon"><i class="${appliance.icon}"></i></div>
                    <div>${appliance.name}</div>
                `;
                applianceElement.title = appliance.description;
                applianceElement.addEventListener('click', () => toggleAppliance(appliance.id));
                container.appendChild(applianceElement);
            });
            
            updateEnergyDisplay();
        }
        
        // è¨ˆç®—ç”¨é›»åº¦æ•¸ï¼šåŠŸç‡(W) Ã— æ™‚é–“(å°æ™‚) Ã· 1000
        function calculateElectricityUsage() {
            let totalKwh = 0;
            let totalCost = 0;
            
            appliances.forEach(appliance => {
                if (appliance.on) {
                    // è¨ˆç®—æ¯æœˆç”¨é›»åº¦æ•¸
                    const dailyKwh = (appliance.power * appliance.hoursPerDay) / 1000;
                    const monthlyKwh = dailyKwh * 30; // ä¸€å€‹æœˆ30å¤©
                    totalKwh += monthlyKwh;
                }
            });
            
            // è¨ˆç®—é›»è²»
            totalCost = totalKwh * electricityPrice;
            
            return { totalKwh, totalCost };
        }
        
        function toggleAppliance(id) {
            if (!energyGameActive) return;
            
            const appliance = appliances.find(a => a.id === id);
            const wasOn = appliance.on;
            appliance.on = !appliance.on;
            
            // è¨ˆç®—åˆ†æ•¸ï¼šé—œé–‰é›»å™¨å¾—10åˆ†
            if (!appliance.on && wasOn) {
                energyScore += 10;
            } else if (appliance.on && !wasOn) {
                energyScore = Math.max(0, energyScore - 10);
            }
            
            // æ›´æ–°é¡¯ç¤º
            updateEnergyDisplay();
            renderEnergyGame();
            
            // æª¢æŸ¥æ˜¯å¦å®ŒæˆæŒ‘æˆ°
            checkEnergyGameCompletion();
        }
        
        function updateEnergyDisplay() {
            const usage = calculateElectricityUsage();
            const totalKwh = usage.totalKwh;
            const totalCost = usage.totalCost;
            
            // è¨ˆç®—èƒ½æºä½¿ç”¨ç‡ (0-100%)
            let maxPossibleKwh = 0;
            appliances.forEach(appliance => {
                const dailyKwh = (appliance.power * appliance.hoursPerDay) / 1000;
                maxPossibleKwh += dailyKwh * 30;
            });
            
            const energyLevel = (totalKwh / maxPossibleKwh) * 100;
            
            // æ›´æ–°èƒ½æºè¡¨
            document.getElementById('energy-level').style.width = `${energyLevel}%`;
            
            // æ›´æ–°é›»è²»é¡¯ç¤º
            document.getElementById('energy-cost').textContent = `$${Math.round(totalCost)}`;
            
            // è¨ˆç®—ç¯€çœé›»è²» (å‡è¨­å…¨éƒ¨é—œé–‰ç‚ºæœ€ä½³ç‹€æ…‹)
            let minPossibleKwh = 0;
            appliances.forEach(appliance => {
                // åªè¨ˆç®—å¿…è¦é›»å™¨ï¼ˆå‡è¨­é›»ç‡ˆå’Œå……é›»å™¨æ˜¯å¿…è¦çš„ï¼‰
                if (appliance.id === 3 || appliance.id === 6) {
                    const dailyKwh = (appliance.power * appliance.hoursPerDay) / 1000;
                    minPossibleKwh += dailyKwh * 30;
                }
            });
            
            const minCost = minPossibleKwh * electricityPrice;
            const savedCost = Math.max(0, 1200 - totalCost); // å‡è¨­åŸæœ¬é›»è²»1200å…ƒ
            
            document.getElementById('energy-saved').textContent = `$${Math.round(savedCost)}`;
            document.getElementById('energy-kwh').textContent = `${totalKwh.toFixed(1)} åº¦`;
            
            // æ›´æ–°åˆ†æ•¸é¡¯ç¤º
            document.getElementById('energy-score').textContent = energyScore;
            
            // æ›´æ–°æ™‚é–“é¡¯ç¤º
            document.getElementById('energy-time').textContent = energyTimeLeft;
            
            // æ›´æ–°åé¥‹
            let feedback = '';
            let feedbackClass = 'feedback';
            
            if (energyLevel <= 30 && savedCost >= 300) {
                feedback = 'å„ªç§€ï¼èƒ½æºä½¿ç”¨åœ¨ç¯€èƒ½ç¯„åœä¸”ç¯€çœå¤§é‡é›»è²»ï¼';
                feedbackClass = 'feedback correct';
            } else if (energyLevel <= 50 && savedCost >= 150) {
                feedback = 'é‚„å¯ä»¥ï¼Œç¹¼çºŒåŠªåŠ›é—œé–‰æ›´å¤šé›»å™¨ï¼';
            } else {
                feedback = 'ç”¨é›»å¤ªå¤šäº†ï¼å¿«é—œæ‰ä¸€äº›ä¸å¿…è¦çš„é›»å™¨ï¼';
                feedbackClass = 'feedback incorrect';
            }
            
            document.getElementById('energy-feedback').textContent = feedback;
            document.getElementById('energy-feedback').className = feedbackClass;
        }
        
        function checkEnergyGameCompletion() {
            const usage = calculateElectricityUsage();
            const totalKwh = usage.totalKwh;
            const totalCost = usage.totalCost;
            
            // è¨ˆç®—èƒ½æºä½¿ç”¨ç‡
            let maxPossibleKwh = 0;
            appliances.forEach(appliance => {
                const dailyKwh = (appliance.power * appliance.hoursPerDay) / 1000;
                maxPossibleKwh += dailyKwh * 30;
            });
            
            const energyLevel = (totalKwh / maxPossibleKwh) * 100;
            
            // è¨ˆç®—ç¯€çœé›»è²»
            let minPossibleKwh = 0;
            appliances.forEach(appliance => {
                if (appliance.id === 3 || appliance.id === 6) {
                    const dailyKwh = (appliance.power * appliance.hoursPerDay) / 1000;
                    minPossibleKwh += dailyKwh * 30;
                }
            });
            
            const minCost = minPossibleKwh * electricityPrice;
            const savedCost = Math.max(0, 1200 - totalCost);
            
            // è¨ˆç®—é¡å¤–åŠ åˆ†
            let bonusScore = 0;
            
            // èƒ½æºä½¿ç”¨ç‡ä½æ–¼30%å¾—30åˆ†
            if (energyLevel <= 30) {
                bonusScore += 30;
            }
            
            // æ¯æœˆç¯€çœé›»è²»è¶…é$300å¾—30åˆ†
            if (savedCost >= 300) {
                bonusScore += 30;
            }
            
            // æ™‚é–“å…§å®Œæˆå¾—30åˆ† (å¦‚æœæ™‚é–“é‚„å‰©10ç§’ä»¥ä¸Š)
            if (energyTimeLeft >= 10) {
                bonusScore += 30;
            }
            
            // æ›´æ–°ç¸½åˆ†æ•¸
            const totalScore = Math.min(100, energyScore + bonusScore);
            document.getElementById('energy-score').textContent = totalScore;
            
            // å¦‚æœé”åˆ°100åˆ†ï¼ŒéŠæˆ²çµæŸ
            if (totalScore >= 100) {
                energyGameActive = false;
                clearInterval(energyGameTimer);
                document.getElementById('energy-feedback').textContent = 'å¤ªæ£’äº†ï¼ä½ ç²å¾—100åˆ†æ»¿åˆ†ï¼æˆç‚ºç¯€é›»é”äººï¼';
                document.getElementById('energy-feedback').className = 'feedback correct';
            }
        }
        
        function startEnergyGame() {
            energyGameActive = true;
            energyScore = 0;
            energyTimeLeft = 60;
            
            // é‡ç½®æ‰€æœ‰é›»å™¨ç‚ºé–‹å•Ÿç‹€æ…‹
            appliances.forEach(appliance => {
                appliance.on = true;
            });
            
            renderEnergyGame();
            
            // é–‹å§‹è¨ˆæ™‚å™¨
            clearInterval(energyGameTimer);
            energyGameTimer = setInterval(() => {
                energyTimeLeft--;
                document.getElementById('energy-time').textContent = energyTimeLeft;
                
                if (energyTimeLeft <= 0) {
                    clearInterval(energyGameTimer);
                    energyGameActive = false;
                    
                    // æœ€çµ‚è¨ˆåˆ†
                    checkEnergyGameCompletion();
                    
                    document.getElementById('energy-feedback').textContent = `æ™‚é–“åˆ°ï¼ä½ çš„æœ€çµ‚å¾—åˆ†æ˜¯${document.getElementById('energy-score').textContent}åˆ†ï¼`;
                    document.getElementById('energy-feedback').className = 'feedback';
                }
            }, 1000);
            
            document.getElementById('energy-feedback').textContent = 'éŠæˆ²é–‹å§‹ï¼é»æ“Šé›»å™¨ä¾†é–‹å•Ÿæˆ–é—œé–‰å®ƒï¼Œç›®æ¨™æ˜¯ç²å¾—100åˆ†æ»¿åˆ†ï¼';
            document.getElementById('energy-feedback').className = 'feedback';
        }
        
        function resetEnergyGame() {
            energyGameActive = false;
            energyScore = 0;
            energyTimeLeft = 60;
            clearInterval(energyGameTimer);
            
            appliances.forEach(appliance => {
                appliance.on = true;
            });
            
            renderEnergyGame();
            
            document.getElementById('energy-feedback').textContent = 'é»æ“Šã€Œé–‹å§‹æŒ‘æˆ°ã€æŒ‰éˆ•é–‹å§‹éŠæˆ²ï¼';
            document.getElementById('energy-feedback').className = 'feedback';
        }
        
        // ========== ç¢³åŒ¯æŒ‘æˆ°è³½ - ä¿®æ­£ç‰ˆ ==========
        let carbonGameActive = false;
        let carbonScore = 0;
        let carbonEmission = 100; // åˆå§‹ç¢³æ’æ”¾100å…¬æ–¤
        let carbonSinkAmount = 0; // åˆå§‹ç¢³åŒ¯å¸æ”¶0å…¬æ–¤
        
        function initCarbonGame() {
            renderCarbonGame();
        }
        
        function renderCarbonGame() {
            const sourcesContainer = document.getElementById('carbon-sources-container');
            const sinksContainer = document.getElementById('carbon-sinks-container');
            
            sourcesContainer.innerHTML = '';
            sinksContainer.innerHTML = '';
            
            // ç¢³æ’æ”¾æº - åˆç†çš„ç¢³æ’æ”¾é‡
            const carbonSources = [
                { id: 1, name: "é–‹è»Š10å…¬é‡Œ", emission: 2.4, icon: "fas fa-car", description: "ç”¢ç”Ÿ2.4å…¬æ–¤äºŒæ°§åŒ–ç¢³" },
                { id: 2, name: "å†·æ°£1å°æ™‚", emission: 0.6, icon: "fas fa-snowflake", description: "ç”¢ç”Ÿ0.6å…¬æ–¤äºŒæ°§åŒ–ç¢³" },
                { id: 3, name: "ä¸Ÿæ£„1kgåƒåœ¾", emission: 1.2, icon: "fas fa-trash", description: "ç”¢ç”Ÿ1.2å…¬æ–¤äºŒæ°§åŒ–ç¢³" },
                { id: 4, name: "ç”¨1åº¦é›»", emission: 0.5, icon: "fas fa-bolt", description: "ç”¢ç”Ÿ0.5å…¬æ–¤äºŒæ°§åŒ–ç¢³" }
            ];
            
            // ç¢³åŒ¯å¸æ”¶ - åˆç†çš„ç¢³å¸æ”¶é‡
            const carbonSinks = [
                { id: 1, name: "ç¨®ä¸€æ£µæ¨¹", sink: 12, icon: "fas fa-tree", description: "æ¯å¹´å¸æ”¶12å…¬æ–¤äºŒæ°§åŒ–ç¢³" },
                { id: 2, name: "ä¿è­·1å…¬é ƒæ£®æ—", sink: 22, icon: "fas fa-forest", description: "æ¯å¹´å¸æ”¶22å™¸äºŒæ°§åŒ–ç¢³" },
                { id: 3, name: "ä¿è­·æµ·æ´‹ç”Ÿæ…‹", sink: 15, icon: "fas fa-water", description: "æ¯å¹´å¸æ”¶15å…¬æ–¤äºŒæ°§åŒ–ç¢³" },
                { id: 4, name: "æ¤æ¨¹é€ æ—", sink: 18, icon: "fas fa-seedling", description: "æ¯å¹´å¸æ”¶18å…¬æ–¤äºŒæ°§åŒ–ç¢³" }
            ];
            
            carbonSources.forEach(source => {
                const sourceElement = document.createElement('div');
                sourceElement.className = 'carbon-source';
                sourceElement.innerHTML = `
                    <i class="${source.icon}"></i> ${source.name}
                `;
                sourceElement.title = source.description;
                sourceElement.addEventListener('click', () => addCarbonEmission(source.id));
                sourcesContainer.appendChild(sourceElement);
            });
            
            carbonSinks.forEach(sink => {
                const sinkElement = document.createElement('div');
                sinkElement.className = 'carbon-sink';
                sinkElement.innerHTML = `
                    <i class="${sink.icon}"></i> ${sink.name}
                `;
                sinkElement.title = sink.description;
                sinkElement.addEventListener('click', () => addCarbonSink(sink.id));
                sinksContainer.appendChild(sinkElement);
            });
            
            updateCarbonDisplay();
        }
        
        function addCarbonEmission(sourceId) {
            if (!carbonGameActive) return;
            
            const sources = [
                { id: 1, emission: 2.4, name: "é–‹è»Š10å…¬é‡Œ" },
                { id: 2, emission: 0.6, name: "å†·æ°£1å°æ™‚" },
                { id: 3, emission: 1.2, name: "ä¸Ÿæ£„1kgåƒåœ¾" },
                { id: 4, emission: 0.5, name: "ç”¨1åº¦é›»" }
            ];
            
            const source = sources.find(s => s.id === sourceId);
            carbonEmission += source.emission;
            
            // è¨ˆç®—åˆ†æ•¸ï¼šæ¸›å°‘ç¢³æ’æ”¾å¾—5åˆ† (ä½†å¢åŠ æ’æ”¾æœƒæ‰£åˆ†)
            carbonScore = Math.max(0, carbonScore - 5);
            
            updateCarbonDisplay();
            
            document.getElementById('carbon-feedback').textContent = `å¢åŠ äº†${source.emission}å…¬æ–¤ç¢³æ’æ”¾ï¼`;
            document.getElementById('carbon-feedback').className = 'feedback incorrect';
            
            checkCarbonGameCompletion();
        }
        
        function addCarbonSink(sinkId) {
            if (!carbonGameActive) return;
            
            const sinks = [
                { id: 1, sink: 12, name: "ç¨®ä¸€æ£µæ¨¹" },
                { id: 2, sink: 22, name: "ä¿è­·1å…¬é ƒæ£®æ—" },
                { id: 3, sink: 15, name: "ä¿è­·æµ·æ´‹ç”Ÿæ…‹" },
                { id: 4, sink: 18, name: "æ¤æ¨¹é€ æ—" }
            ];
            
            const sink = sinks.find(s => s.id === sinkId);
            carbonSinkAmount += sink.sink;
            
            // è¨ˆç®—åˆ†æ•¸ï¼šå¢åŠ ç¢³åŒ¯å¾—5åˆ†
            carbonScore += 5;
            
            updateCarbonDisplay();
            
            document.getElementById('carbon-feedback').textContent = `å¢åŠ äº†${sink.sink}å…¬æ–¤ç¢³åŒ¯å¸æ”¶ï¼`;
            document.getElementById('carbon-feedback').className = 'feedback correct';
            
            checkCarbonGameCompletion();
        }
        
        function updateCarbonDisplay() {
            // è¨ˆç®—ç¢³å¹³è¡¡
            const carbonBalance = carbonSinkAmount - carbonEmission;
            
            // æ›´æ–°é¡¯ç¤º
            document.getElementById('carbon-emission').textContent = `${carbonEmission.toFixed(1)} å…¬æ–¤`;
            document.getElementById('carbon-sink-amount').textContent = `${carbonSinkAmount.toFixed(1)} å…¬æ–¤`;
            document.getElementById('carbon-balance').textContent = `${carbonBalance.toFixed(1)} å…¬æ–¤`;
            
            // æ›´æ–°åˆ†æ•¸é¡¯ç¤º
            document.getElementById('carbon-score').textContent = carbonScore;
            
            // æ›´æ–°ç¢³å¹³è¡¡æŒ‡ç¤ºå™¨
            // ç¢³å¹³è¡¡ç¯„åœï¼š-100åˆ°+100ï¼Œè½‰æ›ç‚º0-100%
            let carbonPercentage = (carbonBalance + 100) / 2;
            carbonPercentage = Math.max(0, Math.min(100, carbonPercentage));
            document.getElementById('carbon-level').style.width = `${carbonPercentage}%`;
            
            // æ›´æ–°åœ°çƒè¡¨æƒ…
            const earthIcon = document.getElementById('earth-icon');
            if (carbonBalance >= 50) {
                earthIcon.className = "fas fa-globe-americas";
                earthIcon.style.color = "#1E88E5";
            } else if (carbonBalance >= 0) {
                earthIcon.className = "fas fa-globe-asia";
                earthIcon.style.color = "#4CAF50";
            } else if (carbonBalance >= -50) {
                earthIcon.className = "fas fa-globe-europe";
                earthIcon.style.color = "#FF9800";
            } else {
                earthIcon.className = "fas fa-globe-africa";
                earthIcon.style.color = "#F44336";
            }
        }
        
        function checkCarbonGameCompletion() {
            const carbonBalance = carbonSinkAmount - carbonEmission;
            
            // è¨ˆç®—é¡å¤–åŠ åˆ†
            let bonusScore = 0;
            
            // ç¢³å¹³è¡¡é”åˆ°æ­£å€¼å¾—30åˆ†
            if (carbonBalance >= 0) {
                bonusScore += 30;
            }
            
            // ç¢³å¹³è¡¡é”åˆ°+50å¾—20åˆ†
            if (carbonBalance >= 50) {
                bonusScore += 20;
            }
            
            // æ¯å¢åŠ 10å…¬æ–¤ç¢³åŒ¯å¾—5åˆ† (å·²åœ¨å¢åŠ æ™‚è¨ˆç®—)
            // æ¯æ¸›å°‘10å…¬æ–¤ç¢³æ’æ”¾å¾—5åˆ† (å·²åœ¨æ¸›å°‘æ™‚è¨ˆç®—)
            
            // æ›´æ–°ç¸½åˆ†æ•¸ (åŸºç¤åˆ†æ•¸å·²åŒ…å«åœ¨carbonScoreä¸­)
            const totalScore = Math.min(100, carbonScore + bonusScore);
            document.getElementById('carbon-score').textContent = totalScore;
            
            // å¦‚æœé”åˆ°100åˆ†ï¼ŒéŠæˆ²çµæŸ
            if (totalScore >= 100) {
                carbonGameActive = false;
                document.getElementById('carbon-feedback').textContent = 'å¤ªæ£’äº†ï¼ä½ ç²å¾—100åˆ†æ»¿åˆ†ï¼ç¢³åŒ¯å¸æ”¶é è¶…éç¢³æ’æ”¾ï¼';
                document.getElementById('carbon-feedback').className = 'feedback correct';
            }
        }
        
        function startCarbonGame() {
            carbonGameActive = true;
            carbonScore = 0;
            carbonEmission = 100;
            carbonSinkAmount = 0;
            
            updateCarbonDisplay();
            
            document.getElementById('carbon-feedback').textContent = 'éŠæˆ²é–‹å§‹ï¼é»æ“Šç¢³æºå¢åŠ æ’æ”¾ï¼Œé»æ“Šç¢³åŒ¯å¢åŠ å¸æ”¶ï¼';
            document.getElementById('carbon-feedback').className = 'feedback';
        }
        
        function resetCarbonGame() {
            carbonGameActive = false;
            carbonScore = 0;
            carbonEmission = 100;
            carbonSinkAmount = 0;
            
            updateCarbonDisplay();
            
            document.getElementById('carbon-feedback').textContent = 'é»æ“Šã€Œé–‹å§‹éŠæˆ²ã€æŒ‰éˆ•é–‹å§‹éŠæˆ²ï¼';
            document.getElementById('carbon-feedback').className = 'feedback';
        }
        
        // ========== æ‹¯æ•‘åŒ—æ¥µç†ŠéŠæˆ² ==========
        let polarBearGameActive = false;
        let polarBearHealth = 100;
        let iceThickness = 100;
        
        function initPolarBearGame() {
            renderPolarBearGame();
        }
        
        function renderPolarBearGame() {
            updatePolarBearDisplay();
        }
        
        function updatePolarBearDisplay() {
            document.getElementById('ice-thickness').textContent = iceThickness;
            document.getElementById('polar-bear-health').textContent = polarBearHealth;
            
            // æ›´æ–°å†°å±¤è¦–è¦ºæ•ˆæœ
            document.getElementById('ice-level').style.height = `${iceThickness}%`;
            
            // æ›´æ–°åŒ—æ¥µç†Šä½ç½®
            const bearElement = document.getElementById('polar-bear');
            const bottomPosition = 10 + (100 - iceThickness) * 0.5;
            bearElement.style.bottom = `${bottomPosition}px`;
            
            // æ›´æ–°åŒ—æ¥µç†Šè¡¨æƒ…
            if (polarBearHealth >= 70) {
                bearElement.textContent = "ğŸ»â€â„ï¸";
            } else if (polarBearHealth >= 30) {
                bearElement.textContent = "ğŸ˜ŸğŸ»â€â„ï¸";
            } else {
                bearElement.textContent = "ğŸ˜¨ğŸ»â€â„ï¸";
            }
        }
        
        function startPolarBearGame() {
            polarBearGameActive = true;
            polarBearHealth = 100;
            iceThickness = 100;
            
            // è¨­ç½®å¨è„…å’Œè§£æ±ºæ–¹æ¡ˆ
            const threatsContainer = document.getElementById('threats-container');
            const solutionsContainer = document.getElementById('solutions-container');
            
            threatsContainer.innerHTML = '';
            solutionsContainer.innerHTML = '';
            
            const threats = [
                { id: 1, name: "å…¨çƒæš–åŒ–", damage: 15, icon: "fas fa-temperature-high" },
                { id: 2, name: "æµ·å†°èåŒ–", damage: 20, icon: "fas fa-icicles" },
                { id: 3, name: "æµ·æ´‹æ±¡æŸ“", damage: 10, icon: "fas fa-trash" },
                { id: 4, name: "éåº¦æ•é­š", damage: 10, icon: "fas fa-fish" }
            ];
            
            const solutions = [
                { id: 1, name: "ç¨®æ¨¹", heal: 15, icon: "fas fa-tree" },
                { id: 2, name: "ç¯€ç´„ç”¨é›»", heal: 10, icon: "fas fa-bolt" },
                { id: 3, name: "æ¸›å°‘å¡‘è† ", heal: 10, icon: "fas fa-recycle" },
                { id: 4, name: "ç¶ è‰²èƒ½æº", heal: 20, icon: "fas fa-solar-panel" }
            ];
            
            threats.forEach(threat => {
                const threatElement = document.createElement('div');
                threatElement.className = 'threat';
                threatElement.innerHTML = `
                    <i class="${threat.icon}"></i> ${threat.name}
                `;
                threatElement.addEventListener('click', () => applyThreat(threat.id));
                threatsContainer.appendChild(threatElement);
            });
            
            solutions.forEach(solution => {
                const solutionElement = document.createElement('div');
                solutionElement.className = 'solution';
                solutionElement.innerHTML = `
                    <i class="${solution.icon}"></i> ${solution.name}
                `;
                solutionElement.addEventListener('click', () => applySolution(solution.id));
                solutionsContainer.appendChild(solutionElement);
            });
            
            updatePolarBearDisplay();
            
            document.getElementById('polar-bear-feedback').textContent = 'éŠæˆ²é–‹å§‹ï¼é»æ“Šå¨è„…äº†è§£å•é¡Œï¼Œé»æ“Šè§£æ±ºæ–¹æ¡ˆå¹«åŠ©åŒ—æ¥µç†Šï¼';
            document.getElementById('polar-bear-feedback').className = 'feedback';
        }
        
        function applyThreat(threatId) {
            if (!polarBearGameActive) return;
            
            const threats = [
                { id: 1, name: "å…¨çƒæš–åŒ–", damage: 15 },
                { id: 2, name: "æµ·å†°èåŒ–", damage: 20 },
                { id: 3, name: "æµ·æ´‹æ±¡æŸ“", damage: 10 },
                { id: 4, name: "éåº¦æ•é­š", damage: 10 }
            ];
            
            const threat = threats.find(t => t.id === threatId);
            
            // æ¸›å°‘å†°å±¤åšåº¦å’ŒåŒ—æ¥µç†Šå¥åº·åº¦
            iceThickness = Math.max(0, iceThickness - threat.damage);
            polarBearHealth = Math.max(0, polarBearHealth - threat.damage / 2);
            
            updatePolarBearDisplay();
            
            document.getElementById('polar-bear-feedback').textContent = `å“¦ä¸ï¼${threat.name}è®“å†°å±¤èåŒ–äº†${threat.damage}%ï¼`;
            document.getElementById('polar-bear-feedback').className = 'feedback incorrect';
            
            checkPolarBearGameOver();
        }
        
        function applySolution(solutionId) {
            if (!polarBearGameActive) return;
            
            const solutions = [
                { id: 1, name: "ç¨®æ¨¹", heal: 15 },
                { id: 2, name: "ç¯€ç´„ç”¨é›»", heal: 10 },
                { id: 3, name: "æ¸›å°‘å¡‘è† ", heal: 10 },
                { id: 4, name: "ç¶ è‰²èƒ½æº", heal: 20 }
            ];
            
            const solution = solutions.find(s => s.id === solutionId);
            
            // æ¢å¾©å†°å±¤åšåº¦å’ŒåŒ—æ¥µç†Šå¥åº·åº¦
            iceThickness = Math.min(100, iceThickness + solution.heal);
            polarBearHealth = Math.min(100, polarBearHealth + solution.heal / 2);
            
            updatePolarBearDisplay();
            
            document.getElementById('polar-bear-feedback').textContent = `å¤ªå¥½äº†ï¼${solution.name}å¹«åŠ©æ¢å¾©äº†å†°å±¤${solution.heal}%ï¼`;
            document.getElementById('polar-bear-feedback').className = 'feedback correct';
            
            checkPolarBearGameWin();
        }
        
        function checkPolarBearGameOver() {
            if (iceThickness <= 0 || polarBearHealth <= 0) {
                polarBearGameActive = false;
                document.getElementById('polar-bear-feedback').textContent = 'éŠæˆ²çµæŸï¼å†°å±¤å®Œå…¨èåŒ–äº†ï¼ŒåŒ—æ¥µç†Šå¤±å»å®¶åœ’äº†...å†è©¦ä¸€æ¬¡å§ï¼';
                document.getElementById('polar-bear-feedback').className = 'feedback incorrect';
            }
        }
        
        function checkPolarBearGameWin() {
            if (iceThickness >= 80 && polarBearHealth >= 80) {
                polarBearGameActive = false;
                document.getElementById('polar-bear-feedback').textContent = 'æ­å–œï¼ä½ æˆåŠŸæ‹¯æ•‘äº†åŒ—æ¥µç†Šå’Œå®ƒçš„å®¶åœ’ï¼';
                document.getElementById('polar-bear-feedback').className = 'feedback correct';
            }
        }
        
        function resetPolarBearGame() {
            polarBearGameActive = false;
            polarBearHealth = 100;
            iceThickness = 100;
            
            updatePolarBearDisplay();
            
            document.getElementById('polar-bear-feedback').textContent = 'é»æ“Šã€Œé–‹å§‹æ•‘æ´ã€æŒ‰éˆ•é–‹å§‹éŠæˆ²ï¼';
            document.getElementById('polar-bear-feedback').className = 'feedback';
        }
        
        // é é¢åŠ è¼‰æ™‚åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>